<div class="main-container" *ngIf="selectedChat; else no_chat">
  <div>
    <div class="head-div">
      <button class="basic-icon-button back-button" type="button" mat-button (click)="toggleSideNav()"><mat-icon class="font-icon-md">arrow_back</mat-icon></button>
      <div class="outer-head">
        <div class="head">
          <img class="chat-img" src="{{ selectedChat.groupImg }}" alt="chat-img">
          <p class="chat-name">{{ getChatName() }}</p>
        </div>
        <div>
          <button class="basic-icon-button" mat-icon-button [matMenuTriggerFor]="menu">
            <mat-icon class="font-icon-md">more_vert</mat-icon>
          </button>
          <mat-menu #menu="matMenu">
            <button mat-menu-item *ngIf="!selectedChat.isGroupChat" (click)="openParticipantProfile(show_profile)"> <!-- when chat is individual chat -->
              <mat-icon>info</mat-icon>
              <span>Details</span>
            </button>
            <button mat-menu-item *ngIf="selectedChat.isGroupChat" (click)="openParticipantProfile(show_group_details)"> <!-- when chat is group chat -->
              <mat-icon>info</mat-icon>
              <span>Group Details</span>
            </button>
          </mat-menu>
        </div>
      </div>
    </div>
    <hr>
  </div>

  <div class="message-body">
    <div *ngIf="messages && messages.length>0; else no_message">

    </div>
    <ng-template #no_message>
      <p class="lg-text">Start the conversation... üí´</p>
    </ng-template>
  </div>

  <div>
    <hr>
    <form class="bottom-div">
      <input class="msg-input" type="text" name="newMessage" id="newMessage" placeholder="Type your message...">
      <button class="basic-icon-button" type="submit"><mat-icon class="font-icon-md">send</mat-icon></button>
    </form>
  </div>
</div>

<ng-template #no_chat>
  <div class="no-text-container">
    <p class="no-text">Welcome Back!! ü•≥</p>
    <p class="no-text">Please select a chat... üó®Ô∏è</p>
  </div>
</ng-template>

<ng-template #show_profile>
  <h2 mat-dialog-title class="size-3">User Profile</h2>
  <mat-dialog-content>
    <div class="profile-head">
      <img class="profile-img" src="{{ individualChatUser?.profileImg }}" alt="profile-img">
      <div class="profile-inner">
        <p class="profile-name ellipsis">{{ individualChatUser?.name }}</p>
        <p class="profile-email ellipsis">{{ individualChatUser?.email }}</p>
        <p class="profile-email ellipsis">Since {{ individualChatUser?.createdAt | date:'dd-MMM-yyyy' }}</p>
      </div>
    </div>
  </mat-dialog-content>
  <mat-dialog-actions align="center">
    <button class="close-btn" mat-button mat-dialog-close>Close</button>
  </mat-dialog-actions>
</ng-template>

<ng-template #show_group_details>
  <h2 mat-dialog-title class="size-3">Group Details</h2>
  <mat-dialog-content>
    <div class="profile-head">
      <img class="profile-img" src="{{ selectedChat?.groupImg }}" alt="profile-img">
      <div class="profile-inner">
        <p class="profile-name ellipsis" *ngIf="!groupDetailsEdit">{{ selectedChat?.chatName }}</p>
        <input class="profile-input" *ngIf="groupDetailsEdit" [(ngModel)]="newGroupName">
        <p class="profile-email ellipsis">Since {{ selectedChat?.createdAt | date:'dd-MMM-yyyy' }}</p>
      </div>
    </div>
  </mat-dialog-content>
  <mat-dialog-actions align="center">
    <button class="create-btn" mat-button *ngIf="!groupDetailsEdit" (click)="editGroupDetails()">Edit</button>
    <button class="create-btn" mat-button *ngIf="groupDetailsEdit" (click)="updateGroup()">Update</button>
    <button class="close-btn ml-1" mat-button mat-dialog-close>Close</button>
  </mat-dialog-actions>
</ng-template>