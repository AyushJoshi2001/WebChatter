<div class="main-container">
  <div class="top-header">
    <div class="head">
      <img class="logo" src="/assets/images/chatBg.png" alt="logo">
      <p class="web-name">WebChatter</p>
    </div>
    <div>
      <button class="menu-icon-button" mat-icon-button [matMenuTriggerFor]="menu">
        <mat-icon class="menu-icon">more_vert</mat-icon>
      </button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item>
          <mat-icon>person</mat-icon>
          <span>Profile</span>
        </button>
        <button mat-menu-item>
          <mat-icon>group</mat-icon>
          <span>Create Group</span>
        </button>
        <button mat-menu-item (click)="openDialog(search_user)">
          <mat-icon>search</mat-icon>
          <span>Search User</span>
        </button>
        <button mat-menu-item (click)="logout()">
          <mat-icon>logout</mat-icon>
          <span>Logout</span>
        </button>
      </mat-menu>
    </div>
  </div>
  <hr>

  <div class="chat-list">
    <app-chat-info class="chat-info" [chat]="chat" *ngFor="let chat of chats" (click)="selectChat(chat)" [ngClass]="{'bg-blue' : selectedChat?._id===chat._id}"></app-chat-info>
  </div>
</div>

<ng-template #search_user>
  <h2 mat-dialog-title>Search User</h2>
  <mat-dialog-content>
    <input class="input" type="text" placeholder="Search..." [(ngModel)]="searchKey" (input)="onSearchKeyChange()">
    <div class="userlist-container">
      <div *ngIf="searchResults && searchResults.length>0; else no_results">
        <div class="outer-div"  *ngFor="let user of searchResults" title="Click to start conversation" (click)="accessIndividualChat(user)">
          <img class="user-pic" src="{{ user?.profileImg }}">
          <div class="innner-div">
            <p class="user-name">{{ user?.name }}</p>
            <p class="user-email">{{ user?.email }}</p>
          </div>
        </div>
      </div>
      <ng-template #no_results>
        <p class="no-results">No results available.</p>
      </ng-template>
    </div>
  </mat-dialog-content>
  <mat-dialog-actions align="center">
    <button class="close-btn" mat-button mat-dialog-close>Close</button>
  </mat-dialog-actions>
</ng-template>